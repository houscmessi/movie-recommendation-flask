<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Movie Recommender (Demo)</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <div class="container">
      <h1>Movie Recommender (Demo)</h1>
      <form method="POST">
        <label for="user_id">选择用户：</label>
        <select name="user_id" id="user_id">
          {% for u in users %}
            <option value="{{u}}" {% if user_id==u %}selected{% endif %}>{{u}}</option>
          {% endfor %}
        </select>
        <button type="submit">生成推荐</button>
      </form>

      {% if recs is not none %}
        <h2>推荐结果</h2>
        {% if recs|length == 0 %}
          <p>暂无可推荐的电影（或用户不存在）。</p>
        {% else %}
          <ul>
            {% for m, s in recs %}
              <li><strong>{{m}}</strong> — 评分估计: {{ "%.2f"|format(s) }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endif %}

      <p class="tip">
        提示：上线前可替换 <code>data/sample_ratings.csv</code> 为 MovieLens 小数据集（ratings.csv 里只保留 userId、movieId、rating 并映射名称）。
      </p>
    </div>
  </body>
</html>